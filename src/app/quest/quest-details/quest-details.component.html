<div *ngIf="quest" class="dnd-full-width" [class.dnd-split-vertical]="responsive.isDesktop()">
  <mat-card>
    <mat-form-field class="dnd-full-width">
      <input #questName matInput [(ngModel)]="quest.name" [maxlength]="maximumNameLength" placeholder="Name"
        matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="5">
      <mat-hint align="end">{{questName.value?.length || 0}}/{{maximumNameLength}}</mat-hint>
    </mat-form-field>

    <mat-form-field class="dnd-full-width">
      <textarea #questDescription matInput [(ngModel)]="quest.description" [maxlength]="maximumDescriptionLength"
        placeholder="Descrpition" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="8"></textarea>
      <mat-hint align="end">{{questDescription.value?.length || 0}}/{{maximumDescriptionLength}}</mat-hint>
    </mat-form-field>
  </mat-card>

  <div class="dnd-margin-sides dnd-margin-top">

    <div *ngIf="responsive.isMobile()" class="dnd-vertical-text-splitter">
      <span>Stages</span>
    </div>

    <mat-accordion>
      <mat-expansion-panel *ngFor="let stage of quest.stages; let idx = index"
        [expanded]="isStageOpen(idx)" (opened)="openStage(idx)"
        class="dnd-full-width">

        <mat-expansion-panel-header>
          <mat-panel-title class="dnd-trimmed dnd-margin-all">{{ stage.journalEntry }}</mat-panel-title>
        </mat-expansion-panel-header>

        <mat-form-field class="dnd-full-width">
          <textarea #stageEntry matInput [(ngModel)]="stage.journalEntry" [maxlength]="maximumDescriptionLength"
            placeholder="Journal entry" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="8"></textarea>
          <mat-hint align="end">{{stageEntry.value?.length || 0}}/{{maximumDescriptionLength}}</mat-hint>
        </mat-form-field>

      </mat-expansion-panel>
    </mat-accordion>

    <div class="dnd-full-width dnd-margin-top-bottom dnd-center-content">
      <button mat-button mat-raised-button color="primary" (click)="addStage()">Add Quest Stage</button>
    </div>

  </div>
</div>
